\chapter{Clean Architecture}
\section{Plugins}
\subsection{Datenbank}
Die Datenbank stellt eines der Plugins dar. Als Technologie wurde hier eine SQLite3 Datenbank verwendet. Die konkrete Implementierung der Schnittstelle zur SQLite-Datenbank befindet sich in der Klasse \href{https://github.com/moorts/Morik/blob/main/src/plugins/database/SQLiteDatabase.h}{\textit{SQLiteDatabase}}. Diese Klasse erbt von der abstrakten Klasse \href{https://github.com/moorts/Morik/blob/main/src/application/AbstractDatabase.h}{\textit{AbstractDatabase}}, die sich in der Applikationsschicht befindet. Hierdurch wird eine Dependency Inversion erreicht, da nun eine \textit{AbstractDatabase} von anderen Klassen verwendet werden kann, um SQL-Befehle auf der Datenbank auszuführen, statt eine konkrete \textit{SQLiteDatabase} zu verwenden, was die Abhängigkeit von innen nach außen laufen lassen würde.

\subsection{Verschlüsselung}

Ein weiteres Plugin ist die Verschlüsselungsbibliothek. Als solche wurde Cryptopp\footnote{\url{https://cryptopp.com/}} verwendet. Die abstrakte Klasse \href{https://github.com/moorts/Morik/blob/main/src/application/Cipher.h}{\textit{Cipher}} definiert die Schnittstelle in der Applikationsschicht, die das Plugin implementieren muss. Eine konkrete Implementierung dieser Schnittstelle befindet sich in der Klasse \href{https://github.com/moorts/Morik/blob/main/src/plugins/encryption/CBC\_Cipher.h}{\textit{CBC\_Cipher}}. Dadurch findet auch hier eine Dependency Inversion statt, da \textit{Cipher} verwendet werden kann, um Verschlüsselung zu verwenden, statt eine Dependency auf eine konkrete Klasse der Pluginschicht zu brauchen. Die Schnittstelle muss lediglich einen String ver- und entschlüsseln können unter Angabe des Klar- bzw. Geheimtextes und eines Schlüssels. \textit{CBC\_Cipher} implementiert dies für die Chiffren, die im \href{https://github.com/moorts/Morik/blob/main/src/plugins/encryption/BLOCK.h}{\textit{BLOCK}} enum aufgezählt sind. Momentan handelt es sich dabei um AES und Serpent, neue Chiffren können allerdings leicht hinzugefügt werden, solange sie von Cryptopp unterstützt werden. Diese werden als Block-Chiffren mit Cipher Block Chaining (CBC) als Betriebsmodus verwendet. Um andere Betriebsmodi, oder Nicht-Blockchiffren zu verwenden, müssten weitere Implementierungen des \textit{Cipher} Interfaces hinzugefügt werden. Dies ist ohne Weiteres möglich, solange ein \textit{String} zür Schlüsselherleitung hinreichend ist.

\section{Adapter}
\subsection{Datenbank}
Die Klasse \href{https://github.com/moorts/Morik/blob/main/src/application/DbInterface.h}{\textit{DbInterface}} implementiert die eigentliche Funktionalität in Form der SQL-Anweisungen und führt diese über eine konkrete Implementierung der \textit{AbstractDatabase} in der Datenbank aus. Somit geht keine Funktionalität verloren, wenn das Plugin durch eine andere Datenbanktechnologie ausgetauscht wird. Die Umsetzung der Funktionalität als SQL-Anweisungen bedeutet jedoch, dass ein Austausch des Plugins nur ohne Weiteres möglich ist, wenn die neue Datenbank ebenfalls eine SQL-Datenbank ist. Handelt es sich bei der neuen Datenbank jedoch beispielsweise um eine noSQL-Datenbank, so muss die Funktionalität, also die Abfragen, angepasst werden. Der Klasse \textit{DbInterface} wird im Konstruktor eine \textit{AbstractDatabase} übergeben, was die Dependency Injection umsetzt.\\
Auf die Benutzung von Prepared Statements wurde innerhalb des Adapters verzichtet, da die Datenbank lokal ist und nur der Benutzer Befehle auf ihr ausführt. Würde die Datenbank über eine öffentliche Schnittstelle angesteuert werden, so wäre dies nicht zu vernachlässigen.
